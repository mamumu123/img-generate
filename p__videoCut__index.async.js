"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[750],{92342:function(ee,O,e){e.d(O,{Jz:function(){return h},KQ:function(){return R},SQ:function(){return o},YZ:function(){return n},_Q:function(){return m},ml:function(){return i}});var R="output.mp4",c="input.mp4",o=R,n={getInfo:"getInfo",screenshot:"screenshot",getMp3FromVideo:"getMp3FromVideo",custom:"custom",cutVideo:"cutVideo"},i=function(j,d){var E="",p="",L=d||{},D=L.rangeLeft,Q=L.rangeRight,M=L.input,z=L.out,B=L.timer;switch(j){case n.screenshot:p="-i ".concat(M," -ss ").concat(B,"  -vframes 1 ").concat(z),E="out.png";break;case n.getMp3FromVideo:p=" -f mp3 -vn",E="out.mp3";break;case n.getInfo:p="",E=R;break;case n.custom:p="",E=R;break;case n.cutVideo:p="-ss ".concat(D," -to ").concat(Q," -i ").concat(M," -c:v copy -c:a copy ").concat(z),E=R;break;default:p=o,E=R}return[p,E]},h=[{value:n.getInfo,label:"\u83B7\u53D6\u89C6\u9891\u4FE1\u606F"},{value:n.custom,label:"\u81EA\u5B9A\u4E49\u8F93\u5165"},{value:n.screenshot,label:"\u89C6\u9891\u622A\u56FE"},{value:n.getMp3FromVideo,label:"\u63D0\u53D6\u97F3\u9891"},{value:n.cutVideo,label:"\u89C6\u9891\u5206\u5272"}],m={mp4:"video/mp4",mp3:"audio/mp3",png:"image/png"}},37713:function(ee,O,e){e.d(O,{t:function(){return d}});var R=e(15009),c=e.n(R),o=e(19632),n=e.n(o),i=e(99289),h=e.n(i),m=e(5574),y=e.n(m),j=e(62435),d=function(p){var L=(0,j.useState)([]),D=y()(L,2),Q=D[0],M=D[1],z=(0,j.useState)(0),B=y()(z,2),ue=B[0],te=B[1],T=(0,j.useState)(!1),re=y()(T,2),ne=re[0],t=re[1];return(0,j.useEffect)(function(){h()(c()().mark(function x(){return c()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(p.setProgress(function(u){var v=u.ratio;console.log("[progress]",u),v>=0&&v<=1&&te(v*100),v===1&&setTimeout(function(){te(0)},1e3)}),p.setLogger(function(u){var v=u.type,C=u.message;switch(v){case"fferr":M(function(F){return[].concat(n()(F),[C])});return}}),p.isLoaded()){r.next=5;break}return r.next=5,p.load();case 5:t(!0);case 6:case"end":return r.stop()}},x)}))()},[]),{stderr:Q,setStderr:M,progress:ue,ffmpegIsLoaded:ne}}},27320:function(ee,O,e){e.d(O,{j:function(){return c},y:function(){return R}});var R=function(n,i){if(!n)return{x:0,y:0};var h=n.getBoundingClientRect(),m=i.clientX-h.left,y=i.clientY-h.top;return{x:m,y}},c=function(n,i,h,m,y){var j=n-h,d=i-m;return j*j+d*d<=y*y}},7351:function(ee,O,e){e.r(O);var R=e(62435),c=e(16957),o=e(78356),n=e(97029),i=e(80854),h=e(26420),m=e(86074);function y(){var j=(0,i.useModel)("video"),d=j.media,E=function(D){var Q,M=(Q=D.target.files)===null||Q===void 0?void 0:Q[0];if(M)try{var z=M.name;if(/\s/.test(z)){o.ZP.error("\u6587\u4EF6\u540D\u4E0D\u80FD\u5B58\u5728\u7A7A\u683C");return}c.p.files.put({name:z,type:M.type,data:M})}catch(B){console.error("handleMediaChange error",B)}},p=function(){d&&c.p&&c.p.files.delete(d.id)};return(0,m.jsx)("div",{children:d?(0,m.jsxs)("div",{children:[(0,m.jsxs)("p",{children:["\u6587\u4EF6\u540D\uFF1A",d.name]}),(0,m.jsxs)("p",{children:["\u6587\u4EF6\u7C7B\u578B\uFF1A",d.type]}),(0,m.jsxs)("p",{children:["\u6587\u4EF6\u5927\u5C0F\uFF1A",(0,h.NR)(d.data.size)]}),(0,m.jsx)(n.ZP,{onClick:p,children:"\u6E05\u9664\u6587\u4EF6"})]}):(0,m.jsx)("div",{children:(0,m.jsx)("input",{type:"file",onChange:E})})})}O.default=y},32604:function(ee,O,e){e.d(O,{f:function(){return t}});var R=e(5574),c=e.n(R),o=e(62435),n=e(86074),i=function(a){var r=a.draw,u=a.$canvas,v=a.waveCanvas,C=a.currentTime,F=a.duration;return(0,o.useEffect)(function(){v&&(r==null||r())},[v,r,C,F]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("canvas",{ref:u,id:"shcanvas",style:{height:"100%",width:"100%",zIndex:0,pointerEvents:"auto"}})})},h=e(1970),m=e.n(h);function y(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return m().d2t(x.toFixed(3))}var j=function(a,r){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"#529393";if(!(!a||!r)){var v=a.width,C=a.height;r.clearRect(0,0,v,C),r.fillStyle=u,r.fillRect(0,0,v,C)}};function d(x){return x*10}function E(x,a){return Number(Number(x/a).toFixed(3))}function p(x,a){return Math.floor(x/a)*a}var L=function(a,r){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:15,C=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!(!a||!r)){var F=a.width,_=7,f=15,P=30;r.font="".concat(_*u,"px Arial"),r.fillStyle="#fff";for(var I=d(v),N=E(F,I),$=p(C,v),Y=-1,g=0;g<I;g+=1)g%10===0?(Y+=1,r.fillRect(g*N,0,u,f*u),r.fillText(y($+Y).split(".")[0],N*g-_*u*2+u,P*u)):g%5===0?r.fillRect(g*N,0,u,f*u/1.5):r.fillRect(g*N,0,u,f*u/3)}},D=function(a){var r=a.canvas,u=a.ctx,v=a.pixelRatio,C=v===void 0?1:v,F=a.duration,_=F===void 0?10:F,f=a.currentTime,P=f===void 0?5:f,I=a.color,N=I===void 0?"red":I,$=a.pointerWidth,Y=$===void 0?2:$;if(!(!r||!u)){var g=r.width,G=r.height;u.fillStyle=N;var b=d(_),s=E(g,b),X=p(P,_),U=Number(((P-X)*10*s).toFixed(3)),K=Y*C;u.fillRect(U,0,K,G)}};function Q(x,a,r){return Math.max(Math.min(x,Math.max(a,r)),Math.min(a,r))}var M={container:"container___FqMEL",shwave:"shwave___yXRah",tool__container:"tool__container____l2mI",slider:"slider___RlCKp"},z=e(71230),B=e(15746),ue=e(71338),te=e(56549),T=e(56615),re=e(27320),ne=function(){var a=(0,o.useState)(0),r=c()(a,2),u=r[0],v=r[1],C=function(){v(function(_){return _+1})};return(0,o.useEffect)(function(){},[u]),C},t=function(a){var r=a.currentTime,u=r===void 0?0:r,v=a.duration,C=v===void 0?10:v,F=a.backgroundColor,_=F===void 0?"#529393":F,f=a.pointerWidth,P=f===void 0?2:f,I=a.pointerColor,N=I===void 0?"white":I,$=a.click,Y=ne(),g=(0,o.useRef)(C);(0,o.useEffect)(function(){g.current=C,Y()},[C]);var G=(0,o.useState)(null),b=c()(G,2),s=b[0],X=b[1],U=(0,o.useRef)(null),K=(0,o.useRef)(null),V=(0,T.Z)(K),ie=(0,o.useState)(1),J=c()(ie,2),W=J[0],de=J[1],ge=function(S){S!==null&&X(S)},ce=function(S){if(!s||!U.current)return 0;var H=(0,re.y)(s,S),se=H.x,he=s.clientWidth,ve=d(g.current),me=E(he,ve),ae=p(u,g.current),le=Q(se/me/10+ae,ae,ae+g.current);return le},Z=function(S){var H=ce(S);u!==H&&($==null||$(H))};(0,o.useEffect)(function(){if(s!==null)return s.addEventListener("click",Z),function(){s.removeEventListener("click",Z)}},[s]),(0,o.useEffect)(function(){if(!(!V||!K.current||!U.current)){var k=V.width;K.current.style.width="".concat(k,"px")}},[V]);var oe=function(){var S=s&&(s==null?void 0:s.getContext("2d"));if(!(!s||!S||!V||!U.current)){var H=V.width,se=V.height;s.width=H*W,s.height=se,U.current.style.width="".concat(s.width,"px"),j(s,S,_),L(s,S,1,g.current),D({canvas:s,ctx:S,pixelRatio:1,duration:C,currentTime:u,color:N,pointerWidth:P})}};return(0,n.jsxs)("div",{className:M.container,ref:K,children:[(0,n.jsx)("div",{className:M.tool__container,children:(0,n.jsxs)(z.Z,{className:M.slider,children:[(0,n.jsx)(B.Z,{span:5,children:(0,n.jsx)(ue.Z,{min:1,max:20,onChange:function(S){return de(S)},value:W,step:.1})}),(0,n.jsx)(B.Z,{span:8,children:(0,n.jsx)(te.Z,{min:1,max:20,style:{margin:"0 16px"},step:.1,value:W,onChange:function(S){return de(S||1)}})})]})}),(0,n.jsx)("div",{ref:U,className:M.shwave,children:(0,n.jsx)(i,{$canvas:ge,waveCanvas:s,draw:oe,currentTime:u,duration:C})})]})}},4075:function(ee,O,e){e.d(O,{Y:function(){return o}});var R=e(62435),c=e(86074),o=function(i){var h=i.playerRef,m=i.setDuration,y=i.url,j=i.setCurrentTime;return(0,R.useEffect)(function(){h.current&&(h.current.ontimeupdate=function(){var d;j==null||j((d=h.current)===null||d===void 0?void 0:d.currentTime)},h.current.addEventListener("canplay",function(){var d;m==null||m((d=h.current)===null||d===void 0?void 0:d.duration)}))},[y]),(0,c.jsx)("div",{children:(0,c.jsx)("video",{controls:!0,width:"100%",height:"auto",crossOrigin:"anonymous",src:y,ref:h})})}},25529:function(ee,O,e){e.r(O),e.d(O,{default:function(){return C}});var R=e(5574),c=e.n(R),o={container:"container___Y881L",header:"header___MCcJg",main:"main___B6GJL",side_bar:"side_bar___J4SsU",main_right:"main_right___BbmVV",main_top:"main_top___daVP4",asset:"asset___I9Zdj",pre:"pre___ArXzG",main_bottom:"main_bottom___YqPmB"},n=e(97029),i=e(62435),h=e(32604),m=e(4075),y=e(19632),j=e.n(y),d=e(15009),E=e.n(d),p=e(99289),L=e.n(p),D={container:"container___DQPpL",upload__container:"upload__container___JmBW3",all_args_box:"all_args_box___rYkZ9",box:"box___C2yrW",btn__box:"btn__box___gJaT6",video__box:"video__box___MFNKD"},Q=e(15045),M=e(78356),z=e(55929),B=e(84385),ue=e(69814),te=e(37713),T=e(92342),re=e(7351),ne=e(80854),t=e(86074),x=function(_){var f=_.videoSrc,P=_.outputType,I=_.inputType;return!f||I===T.YZ.getInfo?null:(0,t.jsxs)("div",{className:D.video__box,children:[P===T._Q.mp4&&(0,t.jsx)("video",{controls:!0,crossOrigin:"anonymous",src:f.blob,width:300,height:300}),P===T._Q.mp3&&(0,t.jsx)("audio",{controls:!0,crossOrigin:"anonymous",src:f.blob}),P===T._Q.png&&(0,t.jsx)("img",{crossOrigin:"anonymous",src:f.blob,width:300,height:300}),(0,t.jsx)(n.ZP,{type:"primary",children:(0,t.jsx)("a",{href:f.blob,download:f.f,children:"\u4E0B\u8F7D"})})]})},a=e(9632),r=(0,Q.createFFmpeg)({log:!0,corePath:"".concat(window.location.origin).concat("/","static/v0.11.0/ffmpeg-core.js")});function u(F){var _=F.duration,f=_===void 0?0:_,P=(0,te.t)(r),I=P.stderr,N=P.setStderr,$=P.progress,Y=P.ffmpegIsLoaded,g=(0,ne.useModel)("video"),G=g.media,b=g.mediaName,s=g.videoCurrentTime,X=(0,a.Z)("args",{defaultValue:T.SQ}),U=c()(X,2),K=U[0],V=U[1],ie=(0,a.Z)("inputType",{defaultValue:T.Jz[0].value}),J=c()(ie,2),W=J[0],de=J[1],ge=(0,i.useState)(""),ce=c()(ge,2),Z=ce[0],oe=ce[1],k=(0,i.useState)(0),S=c()(k,2),H=S[0],se=S[1],he=(0,i.useState)(0),ve=c()(he,2),me=ve[0],ae=ve[1],le=W===T.YZ.cutVideo,je=W===T.YZ.screenshot;(0,i.useEffect)(function(){ae(f)},[f]);var pe=(0,i.useMemo)(function(){var w=Z.split(".").at(-1)||"",A=T._Q[w];return A},[Z]),fe=(0,i.useMemo)(function(){return le||je?"".concat(K):"-i ".concat(b," ").concat(K," ").concat(Z)},[b,K,Z,le]);(0,i.useEffect)(function(){if(W){var w=(0,T.ml)(W,{rangeLeft:H,rangeRight:me,input:b||"",out:Z,timer:s}),A=c()(w,2),q=A[0],_e=A[1];V(q),oe(_e)}else V(T.SQ),oe(T.KQ)},[W,me,H,b,Z,s]);var Ee=(0,i.useState)(),Ce=c()(Ee,2),xe=Ce[0],ye=Ce[1];(0,i.useEffect)(function(){!G||!Y||L()(E()().mark(function w(){var A,q;return E()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return A=G.data,q=G.name,l.t0=r,l.t1=q,l.next=5,(0,Q.fetchFile)(A);case 5:l.t2=l.sent,l.t0.FS.call(l.t0,"writeFile",l.t1,l.t2);case 7:case"end":return l.stop()}},w)}))()},[G,Y]);var Te=function(){var w=L()(E()().mark(function A(){var q;return E()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(!b||!fe)){l.next=3;break}return M.ZP.error("\u8BF7\u786E\u8BA4\u53C2\u6570\u586B\u5199\u5B8C\u6574"),l.abrupt("return");case 3:return N([]),l.next=6,r.run.apply(r,j()(fe.split(" ")));case 6:if(Z){l.next=8;break}return l.abrupt("return");case 8:l.prev=8,q=r.FS("readFile",Z),ye(function(){var Me=URL.createObjectURL(new Blob([q.buffer],{type:pe}));r.FS("unlink",Z);var be={f:Z,blob:Me};return be}),l.next=17;break;case 13:return l.prev=13,l.t0=l.catch(8),console.error("error",l.t0),l.abrupt("return");case 17:case"end":return l.stop()}},A,null,[[8,13]])}));return function(){return w.apply(this,arguments)}}(),Se=function(A){V(A.target.value)},Re=function(){V(T.SQ)};return(0,t.jsxs)("div",{className:D.container,children:[(0,t.jsxs)("div",{className:D.box,children:[(0,t.jsx)("h2",{children:" \u6B65\u9AA41: \u4E0A\u4F20\u5904\u7406\u6587\u4EF6"}),(0,t.jsx)(re.default,{})]}),(0,t.jsxs)("div",{className:D.box,children:[(0,t.jsx)("h2",{children:" \u6B65\u9AA42: \u586B\u5199\u5904\u7406\u53C2\u6570"}),(0,t.jsxs)("div",{style:{marginBottom:10},children:[(0,t.jsx)("h3",{children:"\u53C2\u6570"}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-around"},children:[(0,t.jsx)(z.Z,{value:W,style:{width:220},onChange:function(A){return de(A)},options:T.Jz}),(0,t.jsx)(B.Z,{type:"text",value:K,onChange:Se})]}),le&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.ZP,{onClick:function(){return se(s)},children:"\u8BBE\u7F6E\u4E3A\u8D77\u59CB\u70B9"}),(0,t.jsx)(n.ZP,{onClick:function(){return ae(s)},children:"\u8BBE\u7F6E\u4E3A\u7ED3\u675F\u70B9"})]}),(0,t.jsx)("h3",{children:"\u8F93\u51FA\u6587\u4EF6\u540D"}),(0,t.jsx)(B.Z,{type:"text",value:Z,onChange:function(A){oe(A.target.value)}}),(0,t.jsx)("h3",{children:"\u5B8C\u6574\u53C2\u6570\u5C55\u793A"}),(0,t.jsx)(B.Z,{type:"text",value:"ffmpeg ".concat(fe),disabled:!0})]})]}),(0,t.jsxs)("div",{className:D.box,children:[(0,t.jsx)("h2",{children:" \u6B65\u9AA43: \u8FD0\u884C"}),(0,t.jsx)(B.Z.TextArea,{value:I.join(`
`),readOnly:!0,style:{height:200}}),(0,t.jsxs)("div",{className:D.btn__box,children:[(0,t.jsx)(n.ZP,{type:"primary",onClick:Te,disabled:!b||!fe,children:"\u8FD0\u884C"}),$!==0&&(0,t.jsx)(ue.Z,{percent:$}),(0,t.jsx)(n.ZP,{onClick:Re,children:" \u91CD\u7F6E "})]})]}),(0,t.jsxs)("div",{className:D.box,children:[(0,t.jsx)("h2",{children:" \u6B65\u9AA44: \u4E0B\u8F7D"}),(0,t.jsx)("div",{children:(0,t.jsx)(x,{videoSrc:xe,outputType:pe,inputType:W||""})})]})]})}var v=function(){var _=(0,ne.useModel)("video"),f=_.mediaFile,P=_.mediaType,I=_.videoCurrentTime,N=_.setVideoCurrentTime,$=(0,i.useState)(""),Y=c()($,2),g=Y[0],G=Y[1],b=(0,i.useRef)(null),s=(0,i.useState)(10),X=c()(s,2),U=X[0],K=X[1];console.log("xxxx duration",U),(0,i.useEffect)(function(){if(f){var J=URL.createObjectURL(f);G(J)}},[f]);var V=function(W){if(!b.current){console.error("onClick no playerRef"),N(W);return}b.current.pause(),b.current.currentTime=W},ie=function(){b.current&&G("https://live-s3m.mediav.com/nativevideo/853af20ef450e4b0e467055fc6b955b9-bit_cloud768.mp4")};return(0,t.jsx)("div",{className:o.container,children:(0,t.jsx)("div",{className:o.main,children:(0,t.jsxs)("div",{className:o.main_right,children:[(0,t.jsxs)("div",{className:o.main_top,children:[(0,t.jsx)("div",{className:o.asset,children:(0,t.jsx)(u,{duration:U})}),(0,t.jsxs)("div",{className:o.pre,children:[(0,t.jsx)(m.Y,{playerRef:b,setCurrentTime:N,url:g,setDuration:K}),(0,t.jsx)(n.ZP,{onClick:ie,children:"\u52A0\u8F7D demo url"})]})]}),(0,t.jsx)("div",{className:o.main_bottom,children:(0,t.jsx)(h.f,{currentTime:I,click:V,duration:U})})]})})})},C=v}}]);
